const songs = [
    {
        title: "Mere Ghar Ram Aaye Hain",
        artist: "Jubin nautiyal",
        cover: "bhajan\\ram1.png",
        file: "bhajan\\spotifydown.com - Mere Ghar Ram Aaye Hain.mp3"
    },
    {
        title: "Shri Krishna Govind Hare Murari",
        artist: "Jubin nautiyal",
        cover: "bhajan\\kri1.png",
        file: "bhajan\\spotifydown.com - Shri Krishna Govind Hare Murari.mp3"
    },
    {
        title: "Ram Siya Ram",
        artist: "Sachet Tondon",
        cover: "bhajan\\ram2.png",
        file: "bhajan\\spotifydown.com - Ram Siya Ram.mp3"
    },
      
    
{
    title: "Tum Prem Ho (From RadhaKrishn)",
    artist: "Surya Raj Kamal, Abdul Shaikh",
    cover: "\\Krishna\\kri2.png",
    file: "\\Krishna\\Tum Prem Ho (From _RadhaKrishn_).mp3"
},
{
    title: "Tum Prem Ho - Reprise",
    artist: "Mohit Lalwani, Bharat Kamal",
    cover: "\\Krishna\\kri4.png",
    file: "\\Krishna\\Tum Prem Ho - Reprise.mp3"
},
{
    title: "Samay Samjhayega (Lofi)",
    artist: "Mohit Lalwani, Bharat Kamal",
    cover: "\\Krishna\\kri1.png",
    file: "\\Krishna\\Samay Samjhayega (Lofi).mp3"
},
{
    title: "Rutho Jo Tum (Tum Prem Ho)",
    artist: "Mohit Lalwani, Bharat Kamal",
    cover: "\\Krishna\\kri4.png",
    file: "\\Krishna\\Rutho Jo Tum (Tum Prem Ho).mp3"
},
{
    title: "Tum Door Mujhse Ho Kahaan (Lo-Fi)",
    artist: "Mohit Lalwani",
    cover: "\\Krishna\\Krishna.png",
    file: "\\Krishna\\Tum Door Mujhse Ho Kahaan (Lo-Fi).mp3"
},
{
    title: "Socha Tha Kya Hogaya (Lo-Fi)",
    artist: "Mohit Lalwani, Bharat Kamal",
    cover: "\\Krishna\\kri3.png",
    file: "\\Krishna\\Socha Tha Kya Hogaya (Lo-Fi).mp3"
},
{
    title: "Sab Kuch Hi Mera Kho Gaya - Lo-Fi",
    artist: "Mohit Lalwani, Bharat Kamal",
    cover: "\\Krishna\\kri3.png",
    file: "\\Krishna\\Sab Kuch Hi Mera Kho Gaya - Lo-Fi.mp3"
},
{
    title: "Tum Hi Tum (Radha Krishna) - Reprise Version",
    artist: "Mohit Lalwani, Aishwarya Anand",
    cover: "\\Krishna\\kri3.png",
    file: "\\Krishna\\Tum Hi Tum (Radha Krishna) - Reprise Version.mp3"
},
{
    title: "Radhakrishna Naamawali Chant",
    artist: "Mohit Lalwani, Akansha Bhandari",
    cover: "\\Krishna\\kri4.png",
    file: "\\Krishna\\Radhakrishna Naamawali Chant.mp3"
},
{
    title: "Rutho Jo Tum (Lo-Fi)",
    artist: "Mohit Lalwani, Bharat Kamal",
    cover: "\\Krishna\\kri.png",
    file: "\\Krishna\\Rutho Jo Tum (Lo-Fi).mp3"
},
{
    title: "Theme of Radha Krishna",
    artist: "Armonian",
    cover: "\\Krishna\\kri.png",
    file: "\\Krishna\\Theme of Radha Krishna.mp3"
},
{
    title: "Tum Prem Ho - Lo-Fi",
    artist: "Mohit Lalwani, Bharat Kamal",
    cover: "\\Krishna\\kri4.png",
    file: "\\Krishna\\Tum Prem Ho - Lo-Fi.mp3"
},
{
    title: "Adharam Madhuram - Slowed Lofi",
    artist: "mr.krishnaprajapati",
    cover: "\\Krishna\\kri.png",
    file: "\\Krishna\\Adharam Madhuram - Slowed Lofi.mp3"
},
{
    title: "Samay Samjhayega",
    artist: "Surya Raj Kamal, Mohit Lalwani",
    cover: "\\Krishna\\kri.png",
    file: "\\Krishna\\Samay Samjhayega.mp3"
},
{
    title: "Kho Gaye Tum Na Jaane Kahaan",
    artist: "Surya Raj Kamal, Aishwarya Anand",
    cover: "\\Krishna\\kri4.png",
    file: "\\Krishna\\Kho Gaye Tum Na Jaane Kahaan.mp3"
},
{
    title: "O Kanha O Krishna",
    artist: "Surya Raj Kamal, Aishwarya Anand",
    cover: "\\Krishna\\kri3.png",
    file: "\\Krishna\\O Kanha O Krishna.mp3"
},
{
    title: "Kya Ho Raha Kyun Ho Raha",
    artist: "",
    cover: "\\Krishna\\kri3.png",
    file: "\\Krishna\\Kya Ho Raha Kyun Ho Raha.mp3"
},
{
    title: "Krishn Hain Vistaar (RadhaKrishn)",
    artist: "Surya Raj Kamal, Aishwarya Anand",
    cover: "\\Krishna\\kri.png",
    file: "\\Krishna\\Krishn Hain Vistaar (RadhaKrishn).mp3"
},
{
    title: "Param Prem Mein Radhika (From RadhaKrishn)",
    artist: "Surya Raj Kamal, Bharat Kamal, Gul",
    cover: "\\Krishna\\kri.png",
    file: "\\Krishna\\Param Prem Mein Radhika (From _RadhaKrishn_).mp3"
},
{
    title: "Jahan Jahan Radhe Waha Jayenge Murari (RadhaKrishn)",
    artist: "Surya Raj Kamal, Bharat Kamal, Gul",
    cover: "\\Krishna\\kri4.png",
    file: "\\Krishna\\Jahan Jahan Radhe Waha Jayenge Murari (RadhaKrishn).mp3"
},
{
    title: "Shri Krishna Govind Hare Murari",
    artist: "Jubin Nautiyal",
    cover: "\\Krishna\\kri.png",
    file: "\\Krishna\\Shri Krishna Govind Hare Murari.mp3"
},
{
    title: "Achyutam Keshavam",
    artist: "Shreya Ghoshal",
    cover: "\\Krishna\\kri1.png",
    file: "\\Krishna\\Achyutam Keshavam.mp3"
},
{
    title: "Tum Prem Ho",
    artist: "Aishwarya Anand, Bharat Kamal",
    cover: "\\Krishna\\kri2.png",
    file: "\\Krishna\\Tum Prem Ho.mp3"
},
{
    title: "Mera Hriday Tum",
    artist: "Mohit Lalwani, Aishwarya Anand",
    cover: "\\Krishna\\kri.png",
    file: "\\Krishna\\Mera Hriday Tum.mp3"
},
{
    title: "Shri Krishna Govind Hare Murari",
    artist: "Simpal Kharel",
    cover: "\\Krishna\\kri3.png",
    file: "\\Krishna\\Shri Krishna Govind Hare Murari.mp3"
},
{
    title: "Yashomati Maiya Se Bole Nandlala",
    artist: "Debanjali B Joshi, Bhrigu Parashar",
    cover: "\\Krishna\\kri.png",
    file: "\\Krishna\\Yashomati Maiya Se Bole Nandlala.mp3"
},
{
    title: "Radha Rani - Bhajan Mashup",
    artist: "Dhruv Sharma, Swarna Shri",
    cover: "\\Krishna\\kri1.png",
    file: "\\Krishna\\Radha Rani - Bhajan Mashup.mp3"
},
{
    title: "RadhaKrishna Flute Music",
    artist: "Nandlal Chhanga",
    cover: "\\Krishna\\kri.png",
    file: "\\Krishna\\RadhaKrishna Flute Music.mp3"
},
{
    title: "Radha Rani",
    artist: "Surya Raj Kamal, Abdul Shaikh",
    cover: "\\Krishna\\kri2.png",
    file: "\\Krishna\\Radha Rani.mp3"
},
{
    title: "Radha Rani Laage",
    artist: "Kairavi Buch",
    cover: "\\Krishna\\kri.png",
    file: "\\Krishna\\Radha Rani Laage.mp3"
},
{
    title: "Woh Kisna Hai",
    artist: "",
    cover: "\\Krishna\\kri3.png",
    file: "\\Krishna\\Woh Kisna Hai.mp3"
},
{
    title: "Krishna Krish Flute",
    artist: "Surya Raj Kamal, Abdul Shaikh",
    cover: "\\Krishna\\kri2.png",
    file: "\\Krishna\\Krishna Krish Flute.mp3"
},
{
    title: "Madhurashtakam",
    artist: "Surya Raj Kamal, Abdul Shaikh",
    cover: "\\Krishna\\kri.png",
    file: "\\Krishna\\Madhurashtakam.mp3"
},
{
    title: "Shyam Chanda Hei Shyama Chakori",
    artist: "Sukhwinder Singh, Ayesha Darbar, S.",
    cover: "\\Krishna\\kri.png",
    file: "\\Krishna\\Shyam Chanda Hei Shyama Chakori.mp3"
},
{
    title: "Radha Ke Sang Raas Rachaye Kanha (From RadhaKrishn)",
    artist: "",
    cover: "\\Krishna\\Krishna.png",
    file: "\\Krishna\\Radha Ke Sang Raas Rachaye Kanha (From _RadhaKrishn_).mp3"
},
{
    title: "Tum Hee Ho Hriday Mera (From RadhaKrishn)",
    artist: "Surya Raj Kamal, Abdul Shaikh",
    cover: "\\Krishna\\Krishna.png",
    file: "\\Krishna\\Tum Hee Ho Hriday Mera (From _RadhaKrishn_).mp3"
},
{
    title: "Kanha Ke Adhran Dhari Bansuri (From RadhaKrishn)",
    artist: "Surya Raj Kamal, Abdul Shaikh",
    cover: "\\Krishna\\kri.png",
    file: "\\Krishna\\Kanha Ke Adhran Dhari Bansuri (From _RadhaKrishn_).mp3"
}
,

    {
        title: "Mere Ghar Ram Aaye Hain",
        artist: "Jubin nautiyal",
        cover: "bhajan\\ram1.png",
        file: "bhajan\\spotifydown.com - Mere Ghar Ram Aaye Hain.mp3"
    },
    {
        title: "Shri Krishna Govind Hare Murari",
        artist: "Jubin nautiyal",
        cover: "bhajan\\kri1.png",
        file: "bhajan\\spotifydown.com - Shri Krishna Govind Hare Murari.mp3"
    },
    {
        title: "Ram Siya Ram",
        artist: "Sachet Tondon",
        cover: "bhajan\\ram2.png",
        file: "bhajan\\spotifydown.com - Ram Siya Ram.mp3"
    }


];

let currentSongIndex = 0;
let isPlaying = false;

const audio = new Audio(songs[currentSongIndex].file);
const cover = document.getElementById("cover");
const title = document.getElementById("title");
const artist = document.getElementById("artist");
const playBtn = document.getElementById("play");
const prevBtn = document.getElementById("prev");
const nextBtn = document.getElementById("next");
const progress = document.getElementById("progress");
const progressContainer = document.querySelector(".progress-container");
const playlist = document.getElementById("playlist");
const searchInput = document.getElementById("search");
const volumeControl = document.getElementById("volume");
const playlistList = document.getElementById("playlist-list");
const shuffleBtn = document.getElementById("shuffle");
const repeatBtn = document.getElementById("repeat");
const x =document.querySelector("#x");


function loadSong(song) {
    title.innerText = song.title;
    artist.innerText = song.artist;
    cover.src = song.cover;
    audio.src = song.file;
}

function playSong() {
    isPlaying = true;
    audio.play();
    playBtn.innerHTML = "<button id='pause'><i class='fas fa-pause'></i></button>";
}

function pauseSong() {
    isPlaying = false;
    audio.pause();
    playBtn.innerHTML = "<button id='play'><i class='fas fa-play'></i></button>";
}

function prevSong() {
    currentSongIndex = (currentSongIndex - 1 + songs.length) % songs.length;
    loadSong(songs[currentSongIndex]);
    playSong();
    updatePlaylist();
}

function nextSong() {
    currentSongIndex = (currentSongIndex + 1) % songs.length;
    loadSong(songs[currentSongIndex]);
    playSong();
    updatePlaylist();
}

function updateProgress(e) {
    const { duration, currentTime } = e.srcElement;
    const progressPercent = (currentTime / duration) * 100;
    progress.style.width = `${progressPercent}%`;
}

function setProgress(e) {
    const width = this.clientWidth;
    const clickX = e.offsetX;
    const duration = audio.duration;
    audio.currentTime = (clickX / width) * duration;
}

function updatePlaylist() {
    const allItems = playlist.querySelectorAll("li");
    allItems.forEach((item) => item.classList.remove("active"));
    allItems[currentSongIndex].classList.add("active");
}

function displaySongs(filteredSongs) {
    playlist.innerHTML = "";
    filteredSongs.forEach((song, index) => {
        const songItem = document.createElement("li");
        songItem.innerText = `${song.title} - ${song.artist}`;
        songItem.setAttribute("data-index", index);
        if (index === currentSongIndex) songItem.classList.add("active");
        playlist.appendChild(songItem);
    });
}

playBtn.addEventListener("click", () => (isPlaying ? pauseSong() : playSong()));
prevBtn.addEventListener("click", prevSong);
nextBtn.addEventListener("click", nextSong);
audio.addEventListener("timeupdate", updateProgress);
progressContainer.addEventListener("click", setProgress);

playlist.addEventListener("click", (e) => {
    if (e.target && e.target.nodeName === "LI") {
        currentSongIndex = parseInt(e.target.getAttribute("data-index"));
        loadSong(songs[currentSongIndex]);
        playSong();
        updatePlaylist();
    }
});

searchInput.addEventListener("input", (e) => {
    const searchTerm = e.target.value.toLowerCase();
    const filteredSongs = songs.filter((song) => 
        song.title.toLowerCase().includes(searchTerm) || 
        song.artist.toLowerCase().includes(searchTerm)
    );
    displaySongs(filteredSongs);
});

volumeControl.addEventListener("input", (e) => {
    audio.volume = e.target.value;
});

playlistList.addEventListener("click", (e) => {
    if (e.target && e.target.nodeName === "LI") {
        const playlistName = e.target.getAttribute("data-playlist");
        const filteredSongs = playlistName === "favorites" ? songs.filter(song => song.favorite) : songs;
        displaySongs(filteredSongs);
        document.querySelectorAll("#playlist-list li").forEach(item => item.classList.remove("active"));
        e.target.classList.add("active");
    }
});

shuffleBtn.addEventListener("click", () => {
    songs.sort(() => Math.random() - 0.5);
    currentSongIndex = 0;
    loadSong(songs[currentSongIndex]);
    playSong();
    updatePlaylist();
});

repeatBtn.addEventListener("click", () => {
    audio.loop = !audio.loop;
    repeatBtn.classList.toggle("active", audio.loop);
});

displaySongs(songs);
loadSong(songs[currentSongIndex]);
updatePlaylist();
const addToFavoritesBtn = document.getElementById("addToFavorites");

// Function to toggle favorite status of a song
function toggleFavorite() {
    const currentSong = songs[currentSongIndex];
    currentSong.favorite = !currentSong.favorite;
    // Update button text and icon based on favorite status
    addToFavoritesBtn.innerHTML = `<i class="fas fa-heart${currentSong.favorite ? " active" : ""}"></i> ${currentSong.favorite ? "" : ""}`;
    
    // Toggle the "active" class
    addToFavoritesBtn.classList.toggle("active", currentSong.favorite);
}

// Add event listener for the "Add to Favorites" button
addToFavoritesBtn.addEventListener("click", toggleFavorite);
